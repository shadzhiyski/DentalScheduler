@attribute [Authorize(Roles = "Dentist")]

@using Interfaces.Models.Input
@using Radzen

@inject DialogService DialogService

<EditForm EditContext="@EditContext" OnValidSubmit="OnSubmit">
    <ApplicationValidator TModel="@ITreatmentSessionInput" />

    <div class="form-group row">
        <div class="col-md-3">
            <label for="@nameof(Model.Start)">@nameof(Model.Start)</label>
        </div>
        <div class="col">
            @Model.Start
        </div>
    </div>
    <div class="form-group row">
        <div class="col-md-3">
            <label for="@nameof(Model.End)">@nameof(Model.End)</label>
        </div>
        <div class="col">
            @Model.End
        </div>
    </div>
    <div class="form-group row">
        <div class="col-md-3"></div>
        <div class="col">
            <button type="submit" class="btn btn-primary" @onclick="Approve">Approve</button>
            <button type="submit" class="btn btn-danger" @onclick="Reject">Reject</button>
        </div>
    </div>
</EditForm>

@code {
    public EditContext EditContext { get; set; }

    [Parameter]
    public ITreatmentSessionInput Model { get; set; }

    protected override void OnInitialized()
    {
        EditContext = new EditContext(Model);
    }

    void Approve()
    {
        Model.Status = "Accepted";
    }

    void Reject()
    {
        Model.Status = "Rejected";
    }

    private void OnSubmit()
    {
        DialogService.Close(Model);
    }
}