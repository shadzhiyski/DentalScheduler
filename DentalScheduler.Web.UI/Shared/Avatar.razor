@inject NavigationManager NavigationManager
@inject ApplicationAuthenticationStateProvider AuthenticationStateProvider

<AuthorizeView>
    <NotAuthorized>
        <ul class="navbar-nav ml-auto nav-flex-icons">
            <li class="nav-item">
                <NavLink class="nav-link" href="auth/login">
                    <span class="oi oi-list-rich" aria-hidden="true"></span> Login
                </NavLink>
            </li>
        </ul>
    </NotAuthorized>
    <Authorized>
        <ul class="navbar-nav ml-auto nav-flex-icons">
            <li class="nav-item avatar dropdown @AvatarCssClass">
                <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-55" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false" @onclick="ToggleAvatarMenu">
                    <img src="https://mdbootstrap.com/img/Photos/Avatars/avatar-2.jpg" width="35" height="35" class="rounded-circle z-depth-0"
                    alt="avatar image">
                </a>
                <div class="dropdown-menu dropdown-menu-lg-right dropdown-secondary bg-primary @AvatarCssClass"
                    aria-labelledby="navbarDropdownMenuLink-55">
                    <NavLink class="nav-link dropdown-item bg-primary" href="/" @onclick="(() => Logout())">
                        <span class="oi oi-list-rich" aria-hidden="true"></span> Logout
                    </NavLink>
                </div>
            </li>
        </ul>
    </Authorized>
</AuthorizeView>

@code {
    private bool showAvatarMenu = false;

    private string AvatarCssClass => showAvatarMenu ? "show" : null;

    private void ToggleAvatarMenu()
    {
        showAvatarMenu = !showAvatarMenu;
    }

    public async Task Logout()
    {
        await AuthenticationStateProvider.MarkUserAsLoggedOutAsync();

        NavigationManager.NavigateTo("", true);
    }
}